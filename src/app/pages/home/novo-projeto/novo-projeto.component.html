<div class="modal" (click)="$event.stopPropagation()">
  <div class="modal-header">
    <h3>Novo projeto</h3>
    <p>Preencha os dados básicos para iniciar.</p>
  </div>

  <div class="form-grid">
    <div class="field full">
      <label>Nome do projeto</label>
      <input
        type="text"
        placeholder="Nome do projeto"
        [(ngModel)]="projectName"
      />
    </div>
    <div class="field full">
      <textarea
        rows="2"
        placeholder="Adicionar descrição..."
        [(ngModel)]="description"
      ></textarea>
    </div>
    <div class="field">
      <label>Data de início do projeto</label>
      <input type="date" [(ngModel)]="startDate" />
    </div>
    <div class="field">
      <label>Estado</label>
      <select
        [(ngModel)]="selectedStateId"
        (ngModelChange)="onStateChange($event)"
      >
        <option [ngValue]="null">Selecione um estado</option>
        <option *ngFor="let state of states" [ngValue]="state.id">
          {{ state.nome }}
        </option>
      </select>
    </div>
    <div class="field">
      <label>Cidade</label>
      <select
        [(ngModel)]="selectedCityId"
        [disabled]="!cities.length || loadingCities"
      >
        <option [ngValue]="null">
          {{ loadingCities ? "Carregando cidades..." : "Selecione uma cidade" }}
        </option>
        <option *ngFor="let city of cities" [ngValue]="city.id">
          {{ city.nome }}
        </option>
      </select>
    </div>
    <div class="field full">
      <label>Tipologia do projeto</label>
      <div class="type-grid">
        <button
          type="button"
          class="type-card"
          [class.active]="selectedType === 'urbanismo'"
          (click)="setType('urbanismo')"
          [attr.aria-pressed]="selectedType === 'urbanismo'"
        >
          Urbanismo
        </button>
        <button
          type="button"
          class="type-card"
          [class.active]="selectedType === 'incorporacao'"
          (click)="setType('incorporacao')"
          [attr.aria-pressed]="selectedType === 'incorporacao'"
        >
          Incorporação
        </button>
      </div>
      <p class="hint">
        Envolve a venda de terrenos ou lotes e a construção de edificações.
      </p>
    </div>
    <div class="field full">
      <div class="meta-row">
        <span class="meta-chip">Plano Teste</span>
        <span class="meta-chip">126% a.m.</span>
        <span class="meta-chip">1 fase de aprovação</span>
      </div>
    </div>
  </div>

  <div class="modal-actions">
    <button class="modal-secondary" type="button" (click)="cancel.emit()">
      Cancelar
    </button>
    <button
      class="modal-primary"
      type="button"
      [disabled]="!canSubmit"
      (click)="confirmCreate()"
    >
      Concluir
    </button>
  </div>
</div>
